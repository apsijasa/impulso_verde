# Calculadora de Eficiencia Energ√©tica - Mejoras Implementadas

## üìã Resumen de Cambios

He analizado tu proyecto y mejorado la calculadora para incluir los tres tipos de proyectos bas√°ndome en la estructura del archivo Excel `CALCULADORA IV.xlsx`:

### üîÑ Nuevas Funcionalidades

1. **Selector de Tipo de Proyecto**
   - Energ√≠a Fotovoltaica
   - Bomba de Calor  
   - Auditor√≠a Energ√©tica

2. **Sistema Fotovoltaico Mejorado**
   - **Con suministro el√©ctrico**: C√°lculo basado en consumo mensual
   - **Sin suministro el√©ctrico**: Sistema aislado con bater√≠as basado en:
     - N√∫mero de habitantes
     - Disponibilidad de suministro de agua
     - Tabla de dimensionamiento del Excel

3. **Sistema de Bomba de Calor**
   - **Temperado de piscina**: C√°lculo basado en superficie y profundidad
   - **Agua caliente sanitaria**: Dimensionado por n√∫mero de habitantes
   - **Calefacci√≥n**: Mensaje para agendar consulta especializada

4. **Auditor√≠a Energ√©tica**
   - Mensaje informativo para agendar consulta

## üßÆ C√°lculos Implementados

### Fotovoltaico con Suministro
```javascript
// F√≥rmula del Excel: =C2*12/1.4/200000*1.1
const potencia = (consumo * 12) / 1.4 / 200000 * 1.1; // kWp
const cantModulos = Math.ceil((potencia * 1000) / 435);
const cantInversores = Math.floor(cantModulos * 0.435);
```

### Fotovoltaico Aislado (Sin Suministro)
Tabla de dimensionamiento basada en el Excel:
- ‚â§2 personas + agua: 8 paneles, 5kW inversor, 5kWh bater√≠as
- ‚â§4 personas + agua: 8 paneles, 5kW inversor, 10kWh bater√≠as  
- ‚â§2 personas sin agua: 10 paneles, 8kW inversor, 10kWh bater√≠as
- ‚â§4 personas sin agua: 12 paneles, 10kW inversor, 10kWh bater√≠as
- >4 personas + agua: 10 paneles, 8kW inversor, 10kWh bater√≠as
- >4 personas sin agua: 16 paneles, 10kW inversor, 15kWh bater√≠as

### Precios Base (CLP)
```javascript
const precios = {
  // Fotovoltaico conectado
  moduloFV: 71458.75,
  inversor: 194385,
  estructuraMontaje: 17756.25,
  materialElectrico: 280513.75,
  // ... m√°s elementos
  
  // Fotovoltaico aislado
  moduloFVAislado: 106097.56,
  inversorAislado: 150000,
  baterias: 212000,
  
  // Bomba de calor
  bombaPiscina: 2500000,
  bombaACS: 1800000,
  bombaCalefaccion: 3500000
};
```

## üé® Interfaz Mejorada

### Selector de Pesta√±as
- Interfaz intuitiva con iconos
- Cambio din√°mico de formularios
- Colores coherentes con el dise√±o del sitio

### Formularios Condicionales
- **Fotovoltaico**: Campos diferentes seg√∫n si tiene suministro el√©ctrico
- **Bomba de Calor**: Campos espec√≠ficos seg√∫n el uso seleccionado
- **Auditor√≠a**: Mensaje informativo

### Cotizaci√≥n Din√°mica
- Tabla detallada de componentes y precios
- C√°lculo autom√°tico de IVA y totales
- Resumen del sistema con caracter√≠sticas t√©cnicas
- Mensajes informativos para casos especiales

## üîß Instalaci√≥n y Uso

1. **Reemplaza** el archivo `calculadora-integration.js` existente con la nueva versi√≥n
2. **No se requieren cambios** en `index.html` ni `style.css`
3. La calculadora se inicializa autom√°ticamente

## üì± Responsividad

- Dise√±o adaptable para m√≥viles y escritorio
- Grid responsivo que se ajusta a diferentes tama√±os de pantalla
- Campos de formulario optimizados para touch

## üöÄ Funcionalidades Adicionales

### Validaciones
- Validaci√≥n de campos requeridos
- C√°lculos autom√°ticos al cambiar valores
- Manejo de casos especiales (departamentos, calefacci√≥n)

### Experiencia de Usuario
- Iconos descriptivos para cada secci√≥n
- Colores coherentes con la marca
- Transiciones suaves
- Mensajes informativos claros

### Integraci√≥n
- Compatible con el formulario de cotizaci√≥n existente
- Bot√≥n para agendar consulta especializada
- Mantiene la funcionalidad de generaci√≥n de PDF

## üéØ Casos de Uso Cubiertos

1. **Casa con suministro el√©ctrico** ‚Üí Cotizaci√≥n fotovoltaica conectada
2. **Casa sin suministro el√©ctrico** ‚Üí Sistema aislado con bater√≠as
3. **Departamento** ‚Üí Mensaje explicativo sobre limitaciones
4. **Piscina** ‚Üí Bomba de calor dimensionada por volumen
5. **Agua caliente sanitaria** ‚Üí Bomba de calor por habitantes
6. **Calefacci√≥n** ‚Üí Derivaci√≥n a consulta especializada
7. **Auditor√≠a** ‚Üí Informaci√≥n para agendar reuni√≥n

## üìä M√©tricas y Beneficios

- **Experiencia de usuario mejorada** con opciones claras
- **C√°lculos precisos** basados en tu Excel de referencia
- **Flexibilidad** para diferentes tipos de proyectos
- **Profesionalismo** en la presentaci√≥n de cotizaciones
- **Conversi√≥n mejorada** con flujos espec√≠ficos por producto

La calculadora ahora refleja exactamente la l√≥gica de tu Excel y proporciona una experiencia completa para todos los tipos de proyectos que ofreces.